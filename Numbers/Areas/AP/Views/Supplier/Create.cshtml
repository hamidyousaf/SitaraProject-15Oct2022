@model APSupplierVM
@{ ViewData["Title"] = "Create Supplier";
    ViewData["CurrentPage"] = "Suppliers"; }

<style>
    table td {
        position: relative;
    }

        table td input {
            position: absolute;
            display: block;
            top: 0;
            left: 0;
            margin: 0;
            height: 100%;
            width: 100%;
            border: none;
            padding: 10px;
            box-sizing: border-box;
        }
</style>
<style>
    .form-group > .select2-container {
        width: 100% !important;
    }
</style>

<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            @*<div class="ibox-title">
                    <h5>@ViewBag.EntityState Supplier</h5>
                </div>*@
            <div class="ibox-content">
                <form id="Form" class="form-horizontal" asp-action="Create" enctype="multipart/form-data" onsubmit=" return submitdetails()">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div>
                        <input type="hidden" asp-for="APSupplier.Id" />
                    </div>
                    <div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Registration Date</label>
                                <div class="col-lg-8">
                                    <div class="input-group">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        <input asp-for="APSupplier.RegistrationDate" type="text" readonly class=" form-control" value="@(Model.APSupplier.Id == 0 ? CommonHelper.CurrentDate : Model.APSupplier.RegistrationDate.ToString(CommonHelper.DateFormat))" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 pull-right">
                            <div class="form-group">
                                <label asp-for="APSupplier.Name" class="col-lg-4 control-label">Supplier Name<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.Name" autofocus data-validation="required" class="form-control" />
                                    <span asp-validation-for="APSupplier.Name" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label asp-for="APSupplier.Phone1" class="col-lg-4 control-label">Contact#1:<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.Phone1" data-validation="required" onkeypress='return isNumberKey(event)' onpaste='' ondrop='' class="form-control" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label asp-for="APSupplier.Phone2" class="col-lg-4 col-sm-3 control-label">Contact#2</label>
                                <div class=" col-lg-8 col-sm-4">
                                    <input asp-for="APSupplier.Phone2" onkeypress='return isNumberKey(event)' onpaste='' ondrop='' class="form-control" />
                                    <span asp-validation-for="APSupplier.Phone2" class="text-danger"></span>
                                </div>

                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label asp-for="APSupplier.Web" class="col-lg-4 control-label">Website</label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.Web" id="webValue" onchange="ValidWebsite()" class="form-control" />
                                    <span asp-validation-for="APSupplier.Web" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                        @*<div class="col-md-4 col-sm-6">
                <div class="form-group">
                    <label asp-for="APSupplier.CNIC" class="col-lg-4 control-label"></label>

                    <div class="col-lg-8">
                        <input asp-for="APSupplier.CNIC" class="form-control" data-mask="99999-9999999-9" placeholder="00000-0000000-0" autocomplete="off" />
                        <span asp-validation-for="APSupplier.CNIC" class="text-danger"></span>
                    </div>
                </div>
            </div>*@
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Chamber Membership</label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.ChamberMemebership" class="form-control" />
                                    @*span asp-validation-for="APSupplier.Fax" class="text-danger"></span>*@
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-2 pull-right">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Business Type<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <select id="BussinessType" name="BussinessType" class="form-control chosen-select select-country-city" asp-for="APSupplier.BussinessType"  data-validation="required" asp-items="@ViewBag.BussinessTypes">
                                        <option selected="selected" disabled>Select...</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Registered with FBR<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <select id="Register" class="form-control select-country-city" asp-for="APSupplier.Registered" data-validation="required">
                                        <option value="Select..." selected="selected" disabled>Select...</option>
                                        <option value="Register">Yes</option>
                                        <option value="Non-Register">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label asp-for="APSupplier.NTNNo" class="col-lg-4 control-label"></label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.NTNNo" data-mask="9999999-9" onkeypress='return isNumberKey(event)' id="NTN" onpaste='return false;' ondrop='return false;' class="form-control" />
                                    <span asp-validation-for="APSupplier.NTNNo" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label asp-for="APSupplier.STRNNo" class="col-lg-4 control-label"></label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.STRNNo" data-mask="99-99-9999-999-99"  onkeypress='return isNumberKey(event)' id="STRN" onpaste='return false;' ondrop='return false;' class="form-control" />
                                    <span asp-validation-for="APSupplier.STRNNo" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label class="col-lg-4" asp-for="APSupplier.Country">Country<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <select id="Country" name="Country" class="form-control chosen-select select-country-city" asp-for="APSupplier.Country" asp-items="@ViewBag.AppCountries" onchange="getCities();" data-validation="required" data-validation-error-msg="Country is required" data-validation-error-msg-container="#country">
                                        <option selected="selected">Select...</option>
                                    </select>
                                    <span asp-validation-for="APSupplier.Country" class="text-danger"></span>
                                    <span id="country"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6" style="padding: 0px 25px; ">
                            <div class="form-group">
                                <label class="col-lg-4" asp-for="APSupplier.City">City<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <select name="City" id="City1" class="form-control chosen-select select-country-city" asp-for="APSupplier.City" asp-items="@ViewBag.AppCities" data-validation="required" data-validation-error-msg="City is required" data-validation-error-msg-container="#city">
                                        <option selected="selected" disabled>Select...</option>
                                    </select>
                                    <span asp-validation-for="APSupplier.City" class="text-danger"></span>
                                    <span id="city"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Address<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <input asp-for="APSupplier.Address" data-validation="required" class="form-control" />
                                    @*<span asp-validation-for="APSupplier.Address" class="text-danger"></span>*@
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-2 hidden">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Supplier Type</label>
                                <div class="col-lg-8">
                                    <select id="Status" class="form-control select-country-city" asp-for="APSupplier.Type" data-validation="required">
                                        <option selected="selected" disabled>Select...</option>
                                        <option>Local</option>
                                        <option>International</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 col-sm-2">
                            <div class="form-group">
                                <label class="col-lg-4 control-label">Supplier Status<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <select id="Status" class="form-control chosen-select select-country-city" asp-for="APSupplier.Status" data-validation="required">
                                        <option selected="selected" disabled>Select...</option>
                                        <option>Approved</option>
                                        <option>Blackist</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <div class="form-group">
                                <label asp-for="APSupplier.AccountId" class="col-lg-4 control-label">GL Account<i style="color: #a94442;">*</i></label>
                                <div class="col-lg-8">
                                    <select name="AccountId" class="form-control" id="AccountId" asp-for="APSupplier.AccountId" data-validation-error-msg="Account is required" data-validation-error-msg-container="#account" required>
                                        <option selected="selected" value="">Select...</option>
                                    </select>
                                    <span asp-validation-for="APSupplier.AccountId" class="text-danger"></span>
                                    <span id="account"></span>
                                </div>
                            </div>

                        </div>

                        @if (Model.APSupplier.Id == 0)
                        {
                        <div class="col-md-4">
                            <div class="form-group">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="checkbox checkbox-success">
                                        <input id="manualSupplierGLAccount" type="checkbox" checked disabled>
                                        <label for="manualSupplierGLAccount">Manual Supplier GL Account</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        }
                        <div class="col-md-4">
                            <div class="form-group">
                                <div class="col-lg-4"></div>
                                <div class="col-lg-8">
                                    <div class="checkbox checkbox-success">
                                        <input id="isActive" asp-for="APSupplier.IsActive" type="checkbox" checked="checked">
                                        <label for="isActive">Active</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="wrapper wrapper-content animated fadeIn">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#home">Contact Person</a></li>
                            <li class="hidden"><a data-toggle="tab" href="#menu1">Shopping Detail</a></li>
                            <li><a data-toggle="tab" href="#itemCategory">Item Category</a></li>

                        </ul>

                        <div class="tab-content ">
                            <div id="home" class="tab-pane fade in active">
                                <div class="row" style="margin-left:10px">
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">Name<i style="color: #a94442;">*</i></label>
                                        <div>
                                            <input id="tabname"   class="form-control" onkeypress="return /^[a-zA-Z\s]+$/i.test(event.key)" onpaste="return false;" ondrop="return false;" autocomplete="off" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">Designation<i style="color: #a94442;">*</i></label>
                                        <div>
                                            <input id="tabdesignation"  class="form-control" onkeypress="return /^[a-zA-Z\s]+$/i.test(event.key)" onpaste="return false;" ondrop="return false;" autocomplete="off" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">Contact#:<i style="color: #a94442;">*</i></label>
                                        <div>
                                            <input id="tabphone"   class="form-control" onkeypress='return isNumberKey(event)' onpaste="return false;" ondrop="return false;" autocomplete="off" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">CNIC#<i style="color: #a94442;">*</i></label>
                                        <div>
                                            @*<input id="tabext" class="form-control" onkeypress='return isNumberKey(event)' onpaste="return false;" ondrop="return false;" autocomplete="off" />*@
                                            <input id="tabext" class="form-control" data-mask="99999-9999999-9" placeholder="00000-0000000-0" autocomplete="off" />
                                        </div>
                                    </div>

                                    <div class="form-group col-lg-2 hidden" style="margin-left:5px">
                                        <label class="control-label">Cell</label>
                                        <div>
                                            <input id="tabcell" class="form-control" onkeypress='return isNumberKey(event)' onpaste="return false;" ondrop="return false;" autocomplete="off" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">Email Address</i></label>
                                        <div>
                                            <input id="tabemail" class="form-control email" onpaste="return false;" ondrop="return false;" autocomplete="off" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-1" style="margin-left:5px">
                                        <label class="control-label">  </label>
                                        <div>
                                            <a class="btn btn-primary" onclick="addPersonRow();" style="margin-top:4px">Add</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="container-fluid table-responsive">
                                    <table id="tblPerson" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Designation</th>
                                                <th>Phone#</th>
                                                <th>CNIC#</th>
                                                <th hidden>Cell</th>
                                                <th>Email</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            @foreach (var item in Model.ARContactPerson)
                                            {
                                            <tr class="removed">
                                                <td hidden>
                                                    <input name="Id" class="Id" />
                                                    @Html.DisplayFor(modelItem => @item.Id)
                                                </td>
                                                <td>
                                                    <input class="name" readonly name="pname" value="@item.PersonName" />
                                                </td>
                                                <td>
                                                    <input name="designation" readonly class="designation" value="@item.Designation" />
                                                </td>
                                                <td>
                                                    <input name="phone" readonly class="phone" value="@item.PhoneNo" />
                                                </td>
                                                <td>
                                                    <input name="ext" readonly class="Ext" value="@item.Ext" />
                                                </td>
                                                <td hidden>
                                                    <input name="cell" readonly class="Cell hidden" value="@item.CellNo" />
                                                </td>
                                                <td>
                                                    <input name="email" readonly class="Email" value="@item.Email" />
                                                </td>
                                                <td>
                                                    <a class="btn btn-sm btn-danger m-t-n-xs" onclick="deleterow($(this));"> <i class="fa fa-trash" title="Delete"></i></a>
                                                </td>
                                            </tr>
                                            }

                                        </tbody>

                                    </table>
                                </div>
                            </div>
                            <div id="menu1" class="tab-pane fade">
                                <div class="row" style="margin-left:10px">
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">Location</label>
                                        <div>
                                            <input id="tablocation" class="form-control" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-6" style="margin-left:5px">
                                        <label class="control-label">Address</label>
                                        <div>
                                            <input id="tabaddress" class="form-control" />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">Phone</label>
                                        <div>
                                            <input id="tabphone1" class="form-control" onkeypress='return isNumberKey(event)' />

                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">  </label>
                                        <div>
                                            <a class="btn btn-primary" onclick="addShippingRow();" style="margin-top:4px">Add</a>

                                        </div>
                                    </div>
                                </div>
                                <div class="container-fluid">
                                    <table id="tblshipping" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Location</th>
                                                <th>Address</th>

                                                <th>Phone#</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.ARShippingDetail)
                                            {
                                            <tr class="removedship">
                                                <td hidden>
                                                    <input name="sid" class="Id" value="@item.Id" />
                                                </td>
                                                <td>
                                                    <input name="slocation" readonly class="location" value="@item.Location" />
                                                </td>
                                                <td>
                                                    <input name="saddress" readonly class="address" value="@item.Address" />
                                                </td>
                                                <td>
                                                    <input name="sphone" readonly class="phone" value="@item.PhoneNo" />
                                                </td>
                                                <td>
                                                    <a class="btn btn-sm btn-danger m-t-n-xs " readonly onclick="deleterowship($(this));"> <i class="fa fa-trash" title="Delete"></i></a>
                                                </td>
                                            </tr>
                                            }
                                        </tbody>

                                    </table>
                                </div>
                            </div>
                            <div id="itemCategory" class="tab-pane fade">
                                <div class="row" style="margin-left:10px">
                                    <div class="form-group col-lg-3" style="margin-left:5px">
                                        <label class="control-label">Level 1<i style="color: #a94442;">*</i></label>
                                        <div class="form-group">
                                            <select id="listOfCat" asp-items="@ViewBag.listOfLevelCategories" data-validation="required" class="form-control" data-validation-error-msg="Item Category is required" data-validation-error-msg-container="#icategory">
                                                <option selected="selected" disabled>Select...</option>
                                            </select>
                                            <p id="icategory"></p>
                                        </div>
                                    </div>
                                    <div class="form-group col-lg-3" style="margin-left:5px">
                                        <label class="control-label">Level 2<i style="color: #a94442;">*</i></label>
                                        <div class="form-group">
                                            <select id="listOfLevCat" data-validation="required" class="form-control" data-validation-error-msg="Item Category is required" data-validation-error-msg-container="#icategory2">
                                                <option selected="selected" disabled>Select...</option>
                                            </select>
                                            <p id="icategory2"></p>
                                        </div>
                                    </div>
                                    <div class="form-group col-lg-2" style="margin-left:5px">
                                        <label class="control-label">  </label>
                                        <div>
                                            <a class="btn btn-primary" onclick="AddItemCategory();" style="margin-top:4px">Add</a>
                                        </div>
                                    </div>
                                </div>



                                <div class="container-fluid">
                                    <table id="ItemCategoryTable" class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Level 1</th>
                                                <th>Level 2</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (ViewBag.ItemCategory != null)
                                            {
                                            @foreach (var item in ViewBag.ItemCategory)
                                                {
                                            <tr class="removedCat">

                                                <td class="Id">
                                                    @foreach (var itm in ViewBag.listOfItemCategories)
                                                            {
                                                                if (itm.Value == Convert.ToString(item.CategoryId))
                                                                {
                                                    <input type="text" readonly class="form-control Cat" name="CategoryName" value="@itm.Text" />
                                                    <input type="hidden" readonly class="form-control" name="categoryId" value="@itm.Value" />
                                                                }
                                                            }
                                                </td>

                                                @foreach (var itm in ViewBag.listOfItemCategories)
                                                            {
                                                                if (itm.Value == Convert.ToString(item.CategoryLevId))
                                                                {
                                                <td class="Id">
                                                    <input type="text" readonly class="form-control Cat" name="CategoryName" value="@itm.Text" />
                                                    <input type="hidden" readonly class="form-control" name="categoryId" value="@itm.Value" />
                                                </td>
                                                    }
                                                    }

                                                <td>
                                                    <a class="btn btn-sm btn-danger m-t-n-xs " onclick="deleterowCat($(this));"> <i class="fa fa-trash" title="Delete"></i></a>
                                                </td>
                                            </tr>
                                                }
                                            }
                                        </tbody>

                                    </table>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <a class="btn btn-white" asp-action="Index" asp-controller="Supplier">List</a>
                                        <input id="SaveBtn" type="submit" value=@ViewBag.EntityState class="btn btn-primary submit" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <input hidden id="contactperson" name="ContactPerson1" />
                        <input hidden id="shippingDetail" name="ShippingDetail" />
                        <input hidden id="_itemcategory" name="ItemsCategory" />

                    </div>

                </form>
            </div>
        </div>
    </div>
</div>
@section customJS{
    <script src="~/js/AP/Supplier.js"></script>
    <script>
        $("#listOfCat").select2();
        $("#listOfLevCat").select2();
         $.validate();
         //call when edit-form will open
        var bankCashId =@Model.APSupplier.Id;
        if (bankCashId != 0) {
            $("#AccountId").removeAttr('disabled');
        }


    </script>
    <script>

        $("#AccountId").select2();
        $(function () {
            // bind GLaccounts select2
            var accountId = $('#AccountId');
            bindSelect2(accountId, '/GL/Api/GetAccounts', '/GL/Api/GetAconts?id=', "@ViewBag.Id");
        });
         //$('#AccountId').select2({
         //       ajax: {
         //           url: '/GL/Api/GetAccounts',
         //           dataType: 'json',
         //           delay: 250,
         //           placeholder: 'Search for a GL Account',
         //           processResults: function (data, params) {
         //               return {
         //                   results: data
         //               };
         //           },
         //           cache: true
         //       }
         //   });

            // Fetch the preselected item, and add to the control
         @* if ("@ViewBag.Id" != null)
            {
                var id = "@ViewBag.Id";
            }
        var accountSelect = $('#AccountId');
        $.ajax({
            type: 'GET',
            url: '/GL/Api/GetAccount?id=' + id
        }).then(function (data) {
            var option = new Option(data.text, data.id, true, true);
            accountSelect.append(option).trigger('change');
            accountSelect.trigger({
                type: 'select2:select',
                params: {
                    data: data
                }
            });
        });*@
        function deleterow(row) {
            debugger
            var b = row.closest("tr").index();
            $('.removed').eq(b).remove();
        }
        function deleterowship(row) {
            debugger
            var b = row.closest("tr").index();
            $('.removedship').eq(b).remove();
        }
        function deleterowCat(row) {
            debugger
            var b = row.closest("tr").index();
            var CatName = $('.Cat').eq(b).val();
            var CatId = $('.CatI').eq(b).val();
            $('#listOfCat').append('<option value="' + CatId + '">' + CatName + '</option>');

            $('.removedCat').eq(b).remove();


            //$("#listOfItem").find(":selected").hide();
            //$("#listOfItem").find(":selected").text("Select...");
        }
        function getCities() {
            var countryId = $('#Country').val();
            debugger;
            $.ajax({
                type: 'GET',
                url: '/Api/GetCities?id=' + countryId
            }).then(function (data) {
                var city = $("#City1");
                city.empty();
                for (var i = 0; i < data.length; i++) {
                    //console.log(data[i].name);
                    city.append($("<option />").val(data[i].id).text(data[i].name));
                }
            });
        }
        //call manualOrNot() to disable "isManual-checkbox"
        $('#manualSupplierGLAccount').change(function () {
            debugger
            var isChecked = false;
            if ($('#manualSupplierGLAccount').is(":checked"))
                isChecked = true;
            if (isChecked) { //manual gl account
                $("AccountId").attr('data-validation', 'required');
                $("#AccountId").removeAttr('disabled');
            }
            else {
                $("#AccountId").removeAttr('data-validation');
                $("#AccountId").attr('disabled', true);
            }
        });
        $(document).ready(function () {
            $(".emailMaster").change(function () {
                var inputvalues = $(this).val();
                var regex = /^([a-zA-Z0-9_.+-])+\@@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if (!regex.test(inputvalues)) {
                    swal("", "Please enter a valid email.", "warning");
                    $(".emailMaster").val("");
                    return regex.test(inputvalues);
                }
            });
        });
        $(document).ready(function () {
            $(".email").change(function () {
            var inputvalues = $(this).val();
            var regex = /^([a-zA-Z0-9_.+-])+\@@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if(!regex.test(inputvalues)){
                swal("", "Please enter a valid email.", "warning");
                $(".email").val("");
            return regex.test(inputvalues);
            }
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            //change selectboxes to selectize mode to be searchable
            $(".select-country-city").select2();
            $(".date").datepicker({
            })
        });
    </script>
    <script>
        function addShippingRow() {
            debugger;
            if ($("#tablocation").val() == "") {
                swal("", "Please enter location.", "warning");
                return false;
            } else {
                var location = $("#tablocation").val();
                var address = $("#tabaddress").val();
                var phone = $("#tabphone1").val();
                employee_data = '';
                employee_data = '';
                employee_data += '<tr class="removedship">';
                employee_data += '<td hidden><input name="sid" class ="Id" /></td>';
                employee_data += '<td><input readonly class ="location" name="slocation" value="' + location + '" /></td>';
                employee_data += '<td><input readonly class ="address" name="saddress" value="' + address + '" /></td>';
                employee_data += '<td><input readonly class ="phone" name="sphone" value="' + phone + '" /></td>';
                employee_data += '<td>';
                employee_data += '<a class="btn btn-sm btn-danger m-t-n-xs" onclick="deleterowship($(this));"> <i class="fa fa-trash" title="Delete"></i></a></td>';
                employee_data += '</tr>';
                $('#tblshipping tbody').append(employee_data);

                $("#tablocation").val("");
                $("#tabaddress").val("");
                $("#tabphone1").val("");
            }

        }
        function AddItemCategory() {
            debugger;
            var a = $("#listOfCat").find(":selected").text();
            var acat = $("#listOfLevCat").find(":selected").text();
   
            if (a == "") {
                swal("", "There is no category.", "warning");
                return false;
            }
            if ($("#listOfCat").find(":selected").text() == "Select...") {
                swal("", "Please select Level 1.", "warning");
                return false;
            }
            else if ($("#listOfLevCat").find(":selected").text() == "Select..." || $("#listOfLevCat").find(":selected").text() == ""  ) {
                swal("", "Please select Level 2.", "warning");
                return false;
            }
            else {
                var category = $("#listOfCat").find(":selected").text();
                var category_Id = $("#listOfCat").find(":selected").val();

                var category2 = $("#listOfLevCat").find(":selected").text();
                var category_Id2 = $("#listOfLevCat").find(":selected").val();

                var row = "<tr class='removedCat'>" +
                    "<td > <input type='text' value='" + category + "' name='categoryName' id='Category' class='form-control text-left Cat'  readonly /></td>" +
                    "<td hidden> <input value='" + category_Id + "' name='categoryId' class='CategoryID CatI' readonly /></td>" +
                    "<td > <input type='text' value='" + category2 + "' name='categoryLevName' id='CategoryLev' class='form-control text-left Cat2'  readonly /></td>" +
                    "<td hidden> <input value='" + category_Id2 + "' name='categoryLevId' class='CategoryLevID CatI2' readonly /></td>" +
                    '<td> <a id="del" onclick="deleterowCat($(this));" class="btn btn-sm btn-danger"> <i class="fa fa-trash" title="Delete"></i> </a> </td>'
                "</tr>"
                $('#ItemCategoryTable tbody').append(row);
                $("#listOfCat").find(":selected").remove();
            }

        }
    </script>
    <script>
        function addPersonRow() {
            debugger;
            if ($("#tabname").val() == "") {
                swal("", "Please Enter Name.", "warning");
                return false;
            }
            if ($("#tabdesignation").val() == "") {
                swal("", "Please Enter Designation.", "warning");
                return false;
            }
            else if ($("#tabphone").val() == "") {
                swal("", "Please Enter Contact #.", "warning");
                return false;
            }
           else if ($("#tabext").val() == "") {
                swal("", "Please Enter CNIC #.", "warning");
                return false;
            }
           else if ($("#tabemail").val() == "") {
                swal("", "Please Enter Email.", "warning");
                return false;
            } 
            
            var name = $("#tabname").val();
            var designation = $("#tabdesignation").val();
            var phone = $("#tabphone").val();
            var Ext = $("#tabext").val();
            var Cell = $("#tabcell").val();
            var Email = $("#tabemail").val();
            employee_data = '';
            employee_data = '';
            employee_data += '<tr class="removed">';

            employee_data += '<td hidden><input name="id" class ="Id" /></td>';
            employee_data += '<td><input readonly class ="name"  name="pname" value="' + name + '" /></td>';
            employee_data += '<td><input readonly name="designation" class ="designation" value="' + designation + '" /></td>';
            employee_data += '<td><input readonly name="phone" class ="phone" value="' + phone + '" /></td>';
            employee_data += '<td><input readonly name="ext" class ="Ext" value="' + Ext + '" /></td>';
            /*employee_data += '<td><input readonly name="cell" class ="Cell hidden" value="' + Cell + '" /></td>';*/
            employee_data += '<td><input readonly name="email" class ="Email"  value="' + Email + '" /></td>';
            employee_data += '<td>';
            employee_data += '<a class="btn btn-sm btn-danger m-t-n-xs" onclick="deleterow($(this));"> <i class="fa fa-trash" title="Delete"></i></a></td>';
            employee_data += '</tr>';
            $('#tblPerson tbody').append(employee_data);

            $("#tabname").val("");
            $("#tabdesignation").val("");
            $("#tabphone").val("");
            $("#tabext").val("");
            $("#tabcell").val("");
            $("#tabemail").val("");
        }
    </script>
    <script>
        function submitdetails(form) {
            debugger;
            var Contactdetails = [];
            $.each($("#tblPerson tbody tr"), function () {
                Contactdetails.push({
                    Id: $(this).find('.Id').html(),
                    PersonName: $(this).find('.name').html(),
                    Designation: $(this).find('.designation').html(),
                    PhoneNo: $(this).find('.phone').html(),
                    Ext: $(this).find('.Ext').html(),
                    CellNo: $(this).find('.Cell').html(),
                    Email: $(this).find('.Email').html(),
                });
            });
            var Categories = [];
            $.each($("#ItemCategoryTable tbody tr"), function () {
                Categories.push({
                    Id: $(this).find('.CategoryID').html(),
                });
            });
            var model = JSON.stringify(Categories);
            $("#_itemcategory").val(model);
            var costCenterId = Number($('#BussinessType').val());
            if (Contactdetails.length <= 0) {
                swal("", "Enter At Least One Record in Contact Person!", "info");
                return false;
            }
            else if (Categories.length <= 0) {
                swal("", "Enter At Least One Record in Item Category!", "info");
                return false;
            }
            else if (costCenterId == 0) {
                swal("", "Select Business Type ..!", "info");
                return false;
            }    
            return true;
        }
    </script>
    <script>
        $(".updaterow").click(function () {
            debugger;
            var name = $(this).closest("tr").find('.name').html();
            var designation = $(this).closest("tr").find('.designation').html();
            var phone = $(this).closest("tr").find('.phone').html();
            var ext = $(this).closest("tr").find('.Ext').html();
            var cell = $(this).closest("tr").find('.Cell').html();
            var email = $(this).closest("tr").find('.Email').html();
            $("#tabname").val(5);
            $("#tabdesignation").val(designation);
            $("#tabphone").val(phone);
            $("#tabext").val(ext);
            $("#tabcell").val(cell);
            $("#tabemail").val(email);
            $(this).closest("tr").remove();
        });
    </script>
    <script>
        $(".updaterow1").click(function () {
            debugger;
            var $location = $(this).closest("tr").find('.location').html();
            var $address = $(this).closest("tr").find('.address').text();
            var $phone = $(this).closest("tr").find('.phone').html();
            $("#tablocation").val($location);
            $("#tabaddress").val($address);
            $("#tabphone1").val($phone);

            $(this).closest("tr").remove();

        });
        function isNumberKey(evt) {
            //evt = (evt) ? evt : window.event;
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode == 8 || charCode == 37) {
                return true;
            } else if (charCode == 46 && $(this).val().indexOf('+') != -1) {
                return false;
            } else if (charCode > 31 && charCode != 46 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }

        var register = $("#Register").val();
        if (register == "Non-Register") {
            $("#NTN").attr("disabled", "disabled");
            $("#STRN").attr("disabled", "disabled");
        } else if (register == "Select...") {
            $("#NTN").attr("disabled", "disabled");
            $("#STRN").attr("disabled", "disabled");
        } else if (register == "Register") {
            $("#NTN").attr("disabled", false);
            $("#STRN").attr("disabled", false);
        } else {
            $("#NTN").attr("disabled", "disabled");
            $("#STRN").attr("disabled", "disabled");
        }

        $("#Register").on("change", function () {
            var register = $("#Register").val();
            if (register == "Non-Register") {
                $("#NTN").attr("disabled", "disabled");
                $("#NTN").attr("required", false);
                $("#NTN").val("");
                $("#STRN").attr("disabled", "disabled");
                $("#STRN").attr("required", false);
                $("#STRN").val("");
            } else if (register == "Register") {
                $("#NTN").attr("disabled", false);
                $("#NTN").attr("required", true);
                $("#STRN").attr("disabled", false);
                $("#STRN").attr("required", true);
            }
        });

        //$("#Form").on("submit", function () {
        //    $("#SaveBtn").attr("disabled", true);
        //    $("#SaveBtn").val("Saving...");

        //});

        $(".Cat").each(function () {
            debugger
            var outer = this.value;
            var counter = 0;

            $("#listOfCat option").each(function () {
                var inner = this.text;

                if (outer == inner) {
                    //$('#listOfItem').append('<option value="' + CatId + '">' + CatName + '</option>');
                    //$('.removedCat').eq(b).remove();
                    $('#listOfCat option').eq(counter).attr("disabled", "disabled");
                }
                counter++;
            });
        });

        $('#listOfCat').on('change', function () {
            var parentId = this.value;

            $('#listOfLevCat').find('option').not(':first').remove();
            $.ajax({
                method: "GET",
                url: "/Inventory/Api/GetItemsCategoryByParentId",
                data: { ParentId: parentId }
            }).done(function (data) {
                debugger
                $.each(data, function (i, item) {
                    debugger;
                    $('#listOfLevCat').append($('<option>', {
                        value: item.id,
                        text: item.text
                    }));
                });
            });
        });
    
    </script>
 

}